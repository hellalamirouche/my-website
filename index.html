<html><head><base href="https://github.com/webrtc/"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>WebRTC AI Conference Hub</title><style>
:root {
  --primary-color: #4a90e2;
  --secondary-color: #f5a623;
  --background-color: #f7f9fc;
  --card-color: #ffffff;
  --text-color: #333333;
  --accent-color: #50e3c2;
}
body { font-family: 'Poppins', sans-serif; margin: 0; padding: 0; background-color: var(--background-color); color: var(--text-color); }
.header { background-color: var(--primary-color); color: white; padding: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
.container { max-width: 1200px; margin: 0 auto; padding: 20px; }
.card { background-color: var(--card-color); border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; overflow: hidden; transition: transform 0.3s ease; }
.card:hover { transform: translateY(-5px); }
.card-header { background-color: var(--primary-color); color: white; padding: 15px; font-size: 18px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
.card-content { padding: 20px; }
.btn { background-color: var(--accent-color); color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; transition: background-color 0.3s, transform 0.3s; }
.btn:hover { background-color: #3cc7a5; transform: scale(1.05); }
#videoContainer { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.videoWrapper { position: relative; width: 100%; padding-top: 75%; /* 4:3 Aspect Ratio */ }
video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #ddd; border-radius: 8px; object-fit: cover; }
.controls { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; }
.control-btn { background-color: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; transition: background-color 0.3s, transform 0.3s; }
.control-btn:hover { background-color: rgba(0,0,0,0.7); transform: scale(1.1); }
#chatContainer { height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; border-radius: 8px; }
#chatInput { width: calc(100% - 100px); padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
#sendChat { width: 80px; }
.ai-features { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
.ai-feature { background-color: var(--card-color); padding: 20px; border-radius: 8px; text-align: center; transition: transform 0.3s ease; }
.ai-feature:hover { transform: translateY(-5px); }
.ai-icon { font-size: 40px; margin-bottom: 10px; color: var(--secondary-color); }
#transcriptContainer { height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; margin-top: 20px; border-radius: 8px; }
.options-panel { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
.option-btn { background-color: var(--secondary-color); color: white; border: none; padding: 10px 15px; border-radius: 20px; cursor: pointer; transition: background-color 0.3s, transform 0.3s; }
.option-btn:hover { background-color: #e09600; transform: scale(1.05); }
#participantCount { font-size: 16px; color: white; }
#inviteForm { margin-top: 20px; }
#inviteEmail { width: calc(100% - 120px); padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
#sendInvite { width: 100px; }
.participant-name { position: absolute; bottom: 50px; left: 10px; background-color: rgba(0,0,0,0.5); color: white; padding: 5px 10px; border-radius: 4px; }
</style></head><body>
<div class="header">
  <h1>WebRTC AI Conference Hub</h1>
</div>
<div class="container">
  <div class="card">
    <div class="card-header">
      <span>AI-Enhanced Conference Room</span>
      <span id="participantCount">Participants: 5</span>
    </div>
    <div class="card-content">
      <div id="videoContainer">
        <div class="videoWrapper">
          <video id="localVideo" autoplay muted playsinline></video>
          <div class="participant-name">You</div>
          <div class="controls">
            <button class="control-btn" onclick="toggleAudio()">üé§</button>
            <button class="control-btn" onclick="toggleVideo()">üìπ</button>
            <button class="control-btn" onclick="startScreenShare()">üñ•Ô∏è</button>
            <button class="control-btn" onclick="toggleAIBackground()">üé≠</button>
          </div>
        </div>
        <div class="videoWrapper">
          <video autoplay playsinline></video>
          <div class="participant-name">Alice</div>
        </div>
        <div class="videoWrapper">
          <video autoplay playsinline></video>
          <div class="participant-name">Bob</div>
        </div>
        <div class="videoWrapper">
          <video autoplay playsinline></video>
          <div class="participant-name">Charlie</div>
        </div>
        <div class="videoWrapper">
          <video autoplay playsinline></video>
          <div class="participant-name">Dana</div>
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header">AI-Powered Communication Hub</div>
    <div class="card-content">
      <div id="chatContainer"></div>
      <input type="text" id="chatInput" placeholder="Type your message or command for AI assistant...">
      <button class="btn" id="sendChat" onclick="sendAIEnhancedMessage()">Send</button>
      <div class="options-panel">
        <button class="option-btn" onclick="requestAISummary()">Request AI Summary</button>
        <button class="option-btn" onclick="toggleAutoTranslation()">Toggle Auto-Translation</button>
        <button class="option-btn" onclick="analyzeGroupDynamics()">Analyze Group Dynamics</button>
        <button class="option-btn" onclick="generateActionItems()">Generate Action Items</button>
        <button class="option-btn" onclick="startPrivateChat()">Start Private Chat</button>
      </div>
      <div id="transcriptContainer"></div>
    </div>
  </div>
  <div class="card">
    <div class="card-header">Invite Participants</div>
    <div class="card-content">
      <form id="inviteForm">
        <input type="email" id="inviteEmail" placeholder="Enter participant's email" required>
        <button type="submit" class="btn" id="sendInvite">Send Invite</button>
      </form>
    </div>
  </div>
</div>

<script>
let localStream;
let screenStream;
let peerConnections = {};
let isAudioMuted = false;
let isVideoOff = false;
let isAIBackgroundOn = false;
let isAutoTranslationOn = false;
let participantCount = 5;

async function startAIConferenceHub() {
  try {
    localStream = await navigator.mediaDevices.getUserMedia({
      video: { width: 1280, height: 720 },
      audio: { noiseSuppression: true, echoCancellation: true }
    });
    document.getElementById('localVideo').srcObject = localStream;
    
    console.log("Connected to AI-powered signaling server");
    
    setupAIEnhancedPeerConnections();
    initializeAIFeatures();
    updateParticipantCount(participantCount);
  } catch (err) {
    console.error("Error starting AI Conference Hub:", err);
  }
}

function setupAIEnhancedPeerConnections() {
  const remoteVideos = document.querySelectorAll('#videoContainer video:not(#localVideo)');
  remoteVideos.forEach((video, index) => {
    const peerId = `remote${index + 1}`;
    const peerConnection = new RTCPeerConnection({
      iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
    });
    peerConnections[peerId] = peerConnection;

    localStream.getTracks().forEach(track => {
      peerConnection.addTrack(track, localStream);
    });

    peerConnection.ontrack = event => {
      video.srcObject = event.streams[0];
    };

    peerConnection.onicecandidate = event => {
      if (event.candidate) {
        console.log(`New AI-enhanced ICE candidate for ${peerId}:`, event.candidate);
      }
    };

    peerConnection.createOffer()
      .then(offer => peerConnection.setLocalDescription(offer))
      .then(() => {
        console.log(`AI-enhanced local description set for ${peerId}`);
      })
      .catch(err => console.error(`Error creating AI-enhanced offer for ${peerId}:`, err));
  });
}

function updateParticipantCount(count) {
  participantCount = count;
  document.getElementById('participantCount').textContent = `Participants: ${participantCount}`;
}

function initializeAIFeatures() {
  console.log("Initializing advanced AI features...");
  startAdaptiveNoiseCancellation();
  initializeMultilingualTranslation();
  beginSmartTranscription();
  activateEmotionAnalysis();
  launchAIMeetingAssistant();
}

function startAdaptiveNoiseCancellation() {
  console.log("Adaptive AI noise cancellation activated for all participants");
}

function initializeMultilingualTranslation() {
  console.log("Multilingual real-time translation system online for all participants");
}

function beginSmartTranscription() {
  setInterval(() => {
    const transcript = document.getElementById('transcriptContainer');
    const transcriptText = document.createElement('p');
    transcriptText.textContent = `[AI Transcription]: ${generateSmartTranscript()}`;
    transcript.appendChild(transcriptText);
    transcript.scrollTop = transcript.scrollHeight;
  }, 5000);
}

function activateEmotionAnalysis() {
  console.log("Emotion and engagement analysis module activated for all participants");
}

function launchAIMeetingAssistant() {
  console.log("AI Meeting Assistant is now online and ready to assist all participants");
}

function toggleAudio() {
  isAudioMuted = !isAudioMuted;
  localStream.getAudioTracks().forEach(track => track.enabled = !isAudioMuted);
  updateControlButtonState('audio', isAudioMuted);
}

function toggleVideo() {
  isVideoOff = !isVideoOff;
  localStream.getVideoTracks().forEach(track => track.enabled = !isVideoOff);
  updateControlButtonState('video', isVideoOff);
}

function updateControlButtonState(control, isOff) {
  const button = document.querySelector(`.control-btn:nth-child(${control === 'audio' ? 1 : 2})`);
  button.textContent = isOff ? (control === 'audio' ? 'üîá' : 'üö´') : (control === 'audio' ? 'üé§' : 'üìπ');
}

async function startScreenShare() {
  try {
    screenStream = await navigator.mediaDevices.getDisplayMedia({ video: true });
    const videoTrack = screenStream.getVideoTracks()[0];
    
    Object.values(peerConnections).forEach(pc => {
      const sender = pc.getSenders().find(s => s.track.kind === 'video');
      sender.replaceTrack(videoTrack);
    });
    
    document.getElementById('localVideo').srcObject = screenStream;
    
    videoTrack.onended = () => {
      Object.values(peerConnections).forEach(pc => {
        const sender = pc.getSenders().find(s => s.track.kind === 'video');
        sender.replaceTrack(localStream.getVideoTracks()[0]);
      });
      document.getElementById('localVideo').srcObject = localStream;
    };

    const chatContainer = document.getElementById('chatContainer');
    const screenShareMessage = document.createElement('p');
    screenShareMessage.textContent = "System: You started sharing your screen. All participants can now see your screen.";
    chatContainer.appendChild(screenShareMessage);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  } catch (err) {
    console.error("Error starting AI-enhanced screen share:", err);
  }
}

function toggleAIBackground() {
  isAIBackgroundOn = !isAIBackgroundOn;
  console.log(isAIBackgroundOn ? "Context-aware AI background activated" : "Context-aware AI background deactivated");
  const chatContainer = document.getElementById('chatContainer');
  const aiBackgroundMessage = document.createElement('p');
  aiBackgroundMessage.textContent = `System: ${isAIBackgroundOn ? "AI-powered dynamic background activated. Your background will now adapt to the conversation context." : "AI-powered dynamic background deactivated. Your original background is now visible."}`;
  chatContainer.appendChild(aiBackgroundMessage);
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

function sendAIEnhancedMessage() {
  const chatInput = document.getElementById('chatInput');
  const message = chatInput.value.trim();
  if (message) {
    const chatContainer = document.getElementById('chatContainer');
    const messageElement = document.createElement('p');
    messageElement.textContent = `You: ${message}`;
    chatContainer.appendChild(messageElement);
    chatContainer.scrollTop = chatContainer.scrollHeight;
    chatInput.value = '';
    
    // Simulating AI-enhanced response
    setTimeout(() => {
      const aiResponse = document.createElement('p');
      aiResponse.textContent = `AI Assistant: ${generateAIEnhancedResponse(message)}`;
      chatContainer.appendChild(aiResponse);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }, 1000);
  }
}

function generateSmartTranscript() {
  const participants = ['You', 'Alice', 'Bob', 'Charlie', 'Dana'];
  const topics = ["project timeline", "budget allocation", "team collaboration", "AI integration", "market analysis"];
  const actions = ["discussed", "analyzed", "proposed", "reviewed", "scheduled"];
  const participant = participants[Math.floor(Math.random() * participants.length)];
  const topic = topics[Math.floor(Math.random() * topics.length)];
  const action = actions[Math.floor(Math.random() * actions.length)];
  return `${participant} ${action} the ${topic} with high engagement. Other participants provided valuable insights.`;
}

function generateAIEnhancedResponse(message) {
  const responses = [
    "Based on our discussion and current market trends, I recommend focusing on AI-driven customer experience optimization. This aligns with the project goals discussed earlier.",
    "I've analyzed the data you've presented, and here's an optimized strategy: Implement a phased approach for the AI integration, starting with natural language processing to enhance our customer support channels.",
    "Considering the project timeline and resources, the AI suggests prioritizing the development of our machine learning models for predictive analytics. This will provide the most immediate impact on our business objectives.",
    "I've cross-referenced your input with our database, and here's a data-driven solution: Utilize a hybrid cloud architecture for our AI systems to balance performance and cost-effectiveness."
  ];
  return responses[Math.floor(Math.random() * responses.length)];
}

function requestAISummary() {
  console.log("Generating AI-powered meeting summary...");
  const summaryElement = document.createElement('p');
  summaryElement.textContent = `AI Summary: The meeting focused on project timelines and resource allocation for our AI integration initiative. Key decisions were made regarding the acceleration of natural language processing components. Action items include updating the project roadmap, scheduling a follow-up meeting with the machine learning team, and conducting a cost-benefit analysis for cloud infrastructure options. All ${participantCount} participants showed high engagement, particularly during the AI ethics discussion.`;
  document.getElementById('chatContainer').appendChild(summaryElement);
}

function toggleAutoTranslation() {
  isAutoTranslationOn = !isAutoTranslationOn;
  console.log(isAutoTranslationOn ? "Auto-translation activated for all participants" : "Auto-translation deactivated");
  const chatContainer = document.getElementById('chatContainer');
  const translationMessage = document.createElement('p');
  translationMessage.textContent = `System: ${isAutoTranslationOn ? "Real-time translation is now active. All messages will be automatically translated to each participant's preferred language." : "Real-time translation has been deactivated. Messages will appear in their original language."}`;
  chatContainer.appendChild(translationMessage);
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

function analyzeGroupDynamics() {
  console.log("Analyzing group dynamics and participant engagement...");
  const analysisElement = document.createElement('p');
  analysisElement.textContent = `AI Analysis: Group dynamics are positive with balanced participation among ${participantCount} participants. Engagement levels are high, particularly during discussions on AI integration and ethical considerations. Alice shows increased enthusiasm when discussing technical aspects, while Bob excels in strategic planning dialogues. Charlie has been actively contributing to the AI ethics conversation, and Dana has provided valuable insights on market trends. Overall, the team demonstrates strong collaborative skills and a shared vision for the project.`;
  document.getElementById('chatContainer').appendChild(analysisElement);
}

function generateActionItems() {
  console.log("Generating AI-recommended action items...");
  const actionItemsElement = document.createElement('p');
  actionItemsElement.textContent = `AI-Generated Action Items for ${participantCount} participants:
1. Schedule deep-dive session on AI model selection (Owner: Alice)
2. Create project timeline visualization with key milestones (Owner: Bob)
3. Research potential AI ethics considerations and draft initial guidelines (Owner: Charlie)
4. Develop prototype for user interface with AI integration (Owner: Dana)
5. Prepare cost-benefit analysis for proposed AI solutions (Owner: You)
6. Set up weekly cross-functional team meetings to ensure alignment
7. Investigate partnerships with AI ethics advisory boards
8. Create a knowledge sharing platform for the team to document AI-related learnings`;
  document.getElementById('chatContainer').appendChild(actionItemsElement);
}

function startPrivateChat() {
  const chatContainer = document.getElementById('chatContainer');
  const privateChatMessage = document.createElement('p');
  privateChatMessage.textContent = "System: You've initiated a private chat. Select a participant to start the conversation.";
  chatContainer.appendChild(privateChatMessage);
  
  const participants = ['Alice', 'Bob', 'Charlie', 'Dana'];
  participants.forEach(participant => {
    const participantButton = document.createElement('button');
    participantButton.textContent = participant;
    participantButton.classList.add('option-btn');
    participantButton.onclick = () => startPrivateChatWith(participant);
    chatContainer.appendChild(participantButton);
  });
  
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

function startPrivateChatWith(participant) {
  const chatContainer = document.getElementById('chatContainer');
  const participantSelection = document.createElement('p');
  participantSelection.textContent = `System: Private chat started with ${participant}. Your messages will now be visible only to them.`;
  chatContainer.appendChild(participantSelection);
  
  // Remove participant selection buttons
  document.querySelectorAll('.option-btn').forEach(btn => btn.remove());
  
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

document.getElementById('inviteForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const email = document.getElementById('inviteEmail').value;
  const chatContainer = document.getElementById('chatContainer');
  const inviteMessage = document.createElement('p');
  inviteMessage.textContent = `System: Invitation sent to ${email}. Waiting for them to join the conference.`;
  chatContainer.appendChild(inviteMessage);
  chatContainer.scrollTop = chatContainer.scrollHeight;
  document.getElementById('inviteEmail').value = '';
  
  // Simulate new participant joining after a short delay
  setTimeout(() => {
    const joinMessage = document.createElement('p');
    joinMessage.textContent = `System: ${email} has joined the conference.`;
    chatContainer.appendChild(joinMessage);
    updateParticipantCount(participantCount + 1);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }, 3000);
});

// Initialize the conference hub when the page loads
window.onload = startAIConferenceHub;

</script>
</body></html>
