
<html><head><base href="https://visio.ai/%20de%20not%20use%20fake%20user"><title>Visio AI - Real-Time Video Conferencing</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    height: 100%;
    overflow: hidden;
  }
  .container {
    display: flex;
    height: 100vh;
  }
  .sidebar {
    width: 300px;
    background-color: #f3f2f1;
    padding: 20px;
    overflow-y: auto;
  }
  .main-content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .video-grid {
    flex-grow: 1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
    padding: 20px;
    background-color: #2f2f2f;
    overflow-y: auto;
  }
  .video-container {
    background-color: #1f1f1f;
    border-radius: 8px;
    overflow: hidden;
    aspect-ratio: 16 / 9;
  }
  .video-container video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .controls {
    display: flex;
    justify-content: center;
    padding: 20px;
    background-color: #f3f2f1;
  }
  .control-btn {
    margin: 0 10px;
    padding: 10px 20px;
    background-color: #464775;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  .control-btn:hover {
    background-color: #5c5c8a;
  }
  .participant {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    padding: 10px;
    background-color: #fff;
    border-radius: 5px;
  }
  .participant-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
    background-color: #464775;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }
  .participant-name {
    font-weight: bold;
  }
  #joinForm {
    margin-bottom: 20px;
  }
  #joinForm input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
  }
  #joinForm button {
    width: 100%;
    padding: 10px;
    background-color: #464775;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  .waiting-message {
    text-align: center;
    color: #666;
    margin-top: 20px;
  }
</style>
</head>
<body>
<div class="container">
  <div class="sidebar">
    <h2>Participants</h2>
    <div id="joinForm">
      <input type="text" id="nameInput" placeholder="Enter your name">
      <button onclick="joinMeeting()">Join Meeting</button>
    </div>
    <div id="participantsList"></div>
  </div>
  <div class="main-content">
    <div id="videoGrid" class="video-grid">
      <div class="waiting-message">
        <h3>Welcome to Visio AI</h3>
        <p>Enter your name and click "Join Meeting" to start.</p>
        <p>Other participants will appear here when they join.</p>
      </div>
    </div>
    <div class="controls">
      <button class="control-btn" id="muteBtn">Mute</button>
      <button class="control-btn" id="videoBtn">Stop Video</button>
      <button class="control-btn" id="shareBtn">Share Screen</button>
      <button class="control-btn" id="leaveBtn">Leave Meeting</button>
    </div>
  </div>
</div>

<script>
  const participants = [];
  const videoGrid = document.getElementById('videoGrid');
  const participantsList = document.getElementById('participantsList');
  const nameInput = document.getElementById('nameInput');
  const muteBtn = document.getElementById('muteBtn');
  const videoBtn = document.getElementById('videoBtn');
  const shareBtn = document.getElementById('shareBtn');
  const leaveBtn = document.getElementById('leaveBtn');

  let localStream;
  let screenStream;
  let isAudioMuted = false;
  let isVideoStopped = false;
  let isScreenSharing = false;

  async function joinMeeting() {
    const name = nameInput.value.trim();
    if (!name) {
      alert('Please enter your name');
      return;
    }

    try {
      localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      addParticipant(name, localStream);
      setupLocalVideo(localStream);
      nameInput.value = '';
      document.querySelector('.waiting-message').style.display = 'none';
    } catch (error) {
      console.error('Error accessing media devices:', error);
      alert('Failed to access camera and microphone. Please ensure you have given the necessary permissions.');
    }
  }

  function addParticipant(name, stream) {
    const participant = { name, stream };
    participants.push(participant);
    updateParticipantsList();
    addVideoElement(participant);
  }

  function updateParticipantsList() {
    participantsList.innerHTML = '';
    participants.forEach(participant => {
      const participantDiv = document.createElement('div');
      participantDiv.className = 'participant';
      participantDiv.innerHTML = `
        <div class="participant-avatar">${participant.name[0].toUpperCase()}</div>
        <span class="participant-name">${participant.name}</span>
      `;
      participantsList.appendChild(participantDiv);
    });
  }

  function addVideoElement(participant) {
    const videoContainer = document.createElement('div');
    videoContainer.className = 'video-container';
    const video = document.createElement('video');
    video.srcObject = participant.stream;
    video.autoplay = true;
    video.playsInline = true;
    if (participant.stream === localStream) {
      video.muted = true;
    }
    videoContainer.appendChild(video);
    videoGrid.appendChild(videoContainer);
  }

  function setupLocalVideo(stream) {
    const videoContainer = document.createElement('div');
    videoContainer.className = 'video-container';
    const video = document.createElement('video');
    video.srcObject = stream;
    video.autoplay = true;
    video.playsInline = true;
    video.muted = true;
    videoContainer.appendChild(video);
    videoGrid.insertBefore(videoContainer, videoGrid.firstChild);
  }

  muteBtn.addEventListener('click', () => {
    isAudioMuted = !isAudioMuted;
    localStream.getAudioTracks()[0].enabled = !isAudioMuted;
    muteBtn.textContent = isAudioMuted ? 'Unmute' : 'Mute';
  });

  videoBtn.addEventListener('click', () => {
    isVideoStopped = !isVideoStopped;
    localStream.getVideoTracks()[0].enabled = !isVideoStopped;
    videoBtn.textContent = isVideoStopped ? 'Start Video' : 'Stop Video';
  });

  shareBtn.addEventListener('click', async () => {
    if (!isScreenSharing) {
      try {
        screenStream = await navigator.mediaDevices.getDisplayMedia({ video: true });
        const videoTrack = screenStream.getVideoTracks()[0];
        const videoElement = document.querySelector('.video-container video');
        videoElement.srcObject = new MediaStream([videoTrack]);
        isScreenSharing = true;
        shareBtn.textContent = 'Stop Sharing';
        videoTrack.onended = stopScreenSharing;
      } catch (error) {
        console.error('Error sharing screen:', error);
        alert('Failed to share screen. Please ensure you have given the necessary permissions.');
      }
    } else {
      stopScreenSharing();
    }
  });

  function stopScreenSharing() {
    if (screenStream) {
      screenStream.getTracks().forEach(track => track.stop());
      const videoElement = document.querySelector('.video-container video');
      videoElement.srcObject = localStream;
      isScreenSharing = false;
      shareBtn.textContent = 'Share Screen';
    }
  }

  leaveBtn.addEventListener('click', () => {
    if (localStream) {
      localStream.getTracks().forEach(track => track.stop());
    }
    if (screenStream) {
      screenStream.getTracks().forEach(track => track.stop());
    }
    videoGrid.innerHTML = '';
    participantsList.innerHTML = '';
    participants.length = 0;
    alert('You have left the meeting');
    document.querySelector('.waiting-message').style.display = 'block';
  });
</script>
</body></html>
